<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/0.8.2/css/flag-icon.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/0.8.2/flags/1x1/us.svg">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/0.8.2/flags/4x3/cn.svg">
    <!-- Here I am :) -->
    <link rel="import" href="bower_components/paper-input/paper-input.html"/>
    <link rel="import" href="bower_components/myscript-text-web/myscript-text-web.html"/>
</head>
<body>

<div id="header">
    <h1>Text Handwriting <a onclick="changeEngineLang('en_US')"><span class="flag-icon flag-icon-us"></span></a> <a onclick="changeEngineLang('zh_CN')"><span class="flag-icon flag-icon-cn"></span></a></h1>
</div>

<div id="section">
    <div id="sentence">
        <paper-input label="What's the best friend of human being ?" name="dog" maxlength="5" auto-validate pattern="dog|狗" error-message="invalid response"></paper-input>
    </div>
    <div>
        <!-- Here I am :) -->
        <myscript-text-web applicationkey="34f41895-90c7-4a5b-8088-545a0acb6495" hmackey="0899a420-807e-462b-a1b6-f21361a65e93" enginelang="en_US" hideresult></myscript-text-web>

    </div>
</div>

<script>
    document.querySelector('myscript-text-web').addEventListener('myscript-text-web-result', function () {
        var result = document.querySelector('myscript-text-web').firstcandidate;
        document.querySelector('paper-input[name="dog"]').updateValueAndPreserveCaret(result);
    });

    function changeEngineLang (language){
        var pi = document.querySelector('paper-input[name="dog"]');

        document.querySelector('myscript-text-web').enginelang = language;
        pi.updateValueAndPreserveCaret("");

        if(language == "zh_CN"){
            pi.label = "什么是人类最好的朋友？";
        }else{
            pi.label = "What's the best friend of human being ?";
        }
    }

    document.querySelector('myscript-text-web').addEventListener('myscript-text-web-delete', function () {
        document.querySelector('paper-input[name="dog"]').updateValueAndPreserveCaret("");
    });

</script>

</body>
</html>
